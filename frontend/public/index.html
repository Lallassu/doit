<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <link rel="icon" href="<%= BASE_URL %>favicon.ico">
        <title>DoIt</title>
        <link rel="manifest" href="/manifest.webmanifest">
    </head>
    <body>
        <noscript>
            <strong>We're sorry but vuejs-todoapp doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
        </noscript>
        <div id="app"></div>
    </body>
    <script defer>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(function(reg){
                }).catch(function(err) {
                });
        }

        
        window.addEventListener('beforeinstallprompt', (e) => {
           let deferredPrompt;
           const addBtn = document.querySelector('.add-button');
          e.preventDefault();
          deferredPrompt = e;
          addBtn.style.display = 'block';
        
          addBtn.addEventListener('click', (e) => {
            addBtn.style.display = 'none';
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then((choiceResult) => {
                deferredPrompt = null;
              });
          });
        });

    </script>
</html>
